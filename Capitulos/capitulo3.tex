%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% CAPÍTULO 3
\chapter{Sistema de detecção de VTCDs}  

\section{Proposta do Trabalho}

Como descrito na seção \ref{sec:objetivo} do capítulo 1, o foco deste trabalho é o desenvolvimento do firmware para um sistema de detecção de variações de tensão de curta duração em redes de distribuição de energia, utilizando o hardware desenvolvido em \citeonline{fonsecadesenvolvimento}. 

O Sistema de Monitoramento de Variações de Tensão de Curta Duração proposto tem como objetivo fornecer uma ferramenta robusta e de baixo custo, que permita a medição da qualidade da energia elétrica fornecida pelas concessionárias de energia através da detecção da ocorrência de eventos de variação de tensão de curta duração. O sistema faz a coleta da informação diretamente na rede de Baixa Tensão (BT), podendo ser tanto 127V quanto 220V.

\section{Descrição do hardware utilizado}

O equipamento utilizado neste trabalho foi desenvolvido pelo Prof. Dr. André Sanches Fonseca Sobrinho para sua tese de doutorado, sendo inicialmente projetado para funcionar como uma Unidade de Medição Fasorial Otimizada para Sistemas de Distribuição \cite{fonsecadesenvolvimento}.

Entre as principais vantagens para a utilização deste equipamento estão sua robustez e o baixo custo de seus componentes. \citeonline{fonsecadesenvolvimento} mostra que, em uma versão final do produto, a placa de desenvolvimento Cerebot MX7cK (que será descrita mais adiante neste capítulo), pode ser substituída por componentes mais baratos e que desempenham apenas as funcionalidades necessárias. Além disso, seu uso permitiu que o foco deste trabalho fosse dado ao desenvolvimento do firmware do sistema.

Na Figura \ref{fig:equipamento} pode-se identificar os componentes que integram o protótipo. É possível observar a placa de desenvolvimento Cerebot MX7cK, que conta com um microcontrolador PIC32MX795F512L e uma entrada para conexão Ethernet, as entradas e saídas das três fases de tensão, o neutro e a placa de medição trifásica, que será descrita mais adiante neste capítulo. 

\begin{figure}[H]
\caption{Estrutura do equipamento}
\centering
\includegraphics[width=12cm, height=12cm,keepaspectratio]{./Figuras/equipamento4.jpg}
\label{fig:equipamento} \fonte{Autoria Própria}
\end{figure}

A caixa plástica que serve de proteção para o equipamento foi testada em laboratórios certificados, levando-se em conta diversas condições climáticas, penetração de água e névoa salina. Os resultados  apresentandos foram satisfatórios, mostrando que o dispositivo pode ser instalado em áreas externas \cite{fonsecadesenvolvimento}. A tabela \ref{tab:caracteristicas} apresenta as principais especificações do dispositivo, tanto da parte elétrica como da parte mecânica.

\begin{table}[H]
    \centering
    \caption{Características elétricas e físicas}
    \label{tab:caracteristicas}
    \scalebox{0.8}{
\begin{tabular}{c|c}
\hline 
Parâmetro  & Valor \\ 
\hline 
Corrente máxima (valor RMS) para cada fase & 141,42 A \\ 
\hline 
Tensão Máxima (valor RMS) para cada fase & 275 V \\ 
\hline 
Consumo do equipamento (alimentado através da fase A) & 3,8 VA \\ 
\hline 
Temperatura de operação & -40 ºC a 85 ºC \\ 
\hline 
Graus de potência (IP) do invólucro mecânico & 55 (contra poeira e jatos d'água) \\ 
\hline 
Dimensões do invólucro mecânico & 412 mm x 230 mm x 100 mm \\ 
\hline 
\end{tabular}}

\fonte{Sobrinho (2016)}
\end{table}

\subsection{Microcontrolador PIC32MX795F512L}
\label{sec:micro}

O protótipo conta com um microcontrolador PIC32MX795F512L, fabricado pela empresa \textit{Microchip Technology Incorporated}, que possui unidade de processamento de 32 bits, 512 kB de memória Flash, 128 kB de memória RAM, frequência de operação de 80 MHz e faixa de operação de tensão de 2,3 V a 3,6 V \cite{microchip:pic32}.

O PIC32MX795F512L conta com 5 Timers de 16 bits, que podem ser combinados em pares para formar Timers de 32 bits. Além disso, o microcontrolador conta com a presença de uma interface para Controle de Acesso ao Meio (MAC) de 10/100 Mbps, que permite a implementação de uma conexão física Ethernet \cite{microchip:pic32}. 

O periférico de calendário e relógio em tempo real, também presente no microcontrolador, permite a contagem do tempo em horas, minutos e segundos, a consulta por dia da semana, dia, mês e ano, além de otimização para uso contínuo da bateria e correção de ano bissexto. O erro apresentado é de aproximadamente $\pm$ 0,66 segundos por mês \cite{microchip:pic32}.

Além das funcionalidades mencionadas, outro módulo deste microcontrolador que é útil para o trabalho é o módulo de interface serial SPI, um protocolo de comunicação serial que será explicado com mais detalhes na seção \ref{sec:spi}. Esse módulo possui suporte para configurações mestre e escravo, quatro formatos de clock diferentes, suporte para padrão 8, 16 ou 32 bits, entre outros.  

\begin{figure}[H]
\caption{Placa de desenvolvimento Cerebot MX7cK}
\centering
\includegraphics[width=8cm, height=6cm,keepaspectratio]{./Figuras/cerebot.png}
\label{fig:cerebot} \fonte{Diligent Incorporated (2013) \nocite{cerebot:mx7ck}}
\end{figure}

O microcontrolador PIC32MX795F512L foi utilizado através da placa de desenvolvimento Cerebot MX7cK, que é fabricada pela empresa \textit{Digilent Incorporated}. Essa placa possui 52 pinos de entrada e saída, interface Ethernet 10/100, 5 entradas de interrupção externa e diversos outros periféricos, podendo ser alimentada via USB ou fonte AC-DC externa. \cite{cerebot:mx7ck}. Um diagrama com os principais periféricos da Cerebot MX7cK é apresentado na figura \ref{fig:cerebot}:

\begin{figure}[H]
\caption{Diagrama do circuito da placa Cerebot MX7cK}
\centering
\includegraphics[width=8cm, height=8cm,keepaspectratio]{./Figuras/cerebotDiagram.png}
\label{fig:cerebot} \fonte{Diligent Incorporated (2013) \nocite{cerebot:mx7ck}}
\end{figure}


\subsection{Placa de Medição Trifásica}

O desenvolvimento da placa de medição trifásica, utilizada neste trabalho para a aquisição dos sinais de tensão, é descrito em Sobrinho (2016). Como é possível observar na Figura \ref{fig:placamedicao}, esse 
dispositivo conta com conexões para as três fases de tensão, interface lógica com a placa do 
microcontrolador, fonte AC/DC e conexão com o neutro da rede.

\begin{figure}[H]
\caption{Placa para aquisição dos sinais de tensão}
\centering
\includegraphics[width=12cm, height=12cm,keepaspectratio]{./Figuras/placamedicao.jpg}
\label{fig:placamedicao} \fonte{Adaptado de Sobrinho (2016)}
\end{figure}

O ADE7758, circuito integrado fabricado pela empresa \textit{Analog Devices}, é um medidor de energia elétrica trifásico de alta precisão, com interface serial compatível com o protocolo SPI, alimentação de 5V e entrada analógica para cada um dos três canais de corrente e três canais de tensão \cite{analogdevices:ade7758}. Esse circuito integrado  é responsável pela conversão analógico-digital dos sinais lidos pelos três canais de tensão, disponibilizando então o valor eficaz da tensão da rede para o microcontrolador. 

\begin{figure}[H]
\caption{Configuração de pinos do circuito integrado ADE7758}
\centering
\includegraphics[width=6cm, height=6cm,keepaspectratio]{./Figuras/ADE7758.png}
\label{fig:ade7758} \fonte{Adaptado de Analog Devices (2011) \nocite{analogdevices:ade7758}}
\end{figure}

A Figura \ref{fig:eletrico1} ilustra o esquemático dos circuitos que realizam a interface entre os canais de tensão do circuito integrado ADE7758 e os sinais de tensão provenientes da rede elétrica na placa de medição trifásica.

\begin{figure}[H]
\caption{Parte do esquemático da placa de medição trifásica}
\centering
\includegraphics[width=12cm, height=12cm,keepaspectratio]{./Figuras/eletrico1.jpg}
\label{fig:eletrico1} \fonte{\citeonline{fonsecadesenvolvimento}}
\end{figure}

Os conectores J1, J7 e J8 conectam as três fases da tensão à placa, e os divisores resistivos R23/R24, R25/R26 e R27/R28 fazem a atenuação da tensão de entrada para os limites adequados ao conversor A/D do circuito integrado. Os capacitores presentes nas saídas dos divisores funcionam, em conjunto com os resistores, como filtros \textit{anti-aliasing} \cite{fonsecadesenvolvimento}. 
	
A Equação (\ref{eq:atenuacao}) expressa essa relação de atenuação, onde $V_N$ é a tensão em um dos canais do ADE7758, e $V_{IN}$ é a tensão proveniente de uma das fases da rede trifásica.

\begin{equation}
\label{eq:atenuacao}
V_N = \frac{1k\Omega}{1k\Omega + 1M\Omega}V_{IN} = 9,99 \cdot 10^{-4} V_{IN}
\end{equation} 

De acordo com o datasheet do ADE7758, a faixa de operação das entradas analógicas é de $\pm 500 mV$ \cite{analogdevices:ade7758}. Desta maneira, a partir da Equação (\ref{eq:atenuacao}) é possível determinar um valor máximo de $500,5 V$ nas entradas de tensão da placa, o que resultará no valor de $500 mV$ na entrada do conversor A/D. Isso permite que tanto tensões com valor RMS de 127 V e 220 V sejam amostradas.

Na Figura \ref{fig:eletrico1} é possível observar também uma fonte AC/DC modelo RAC02-05SC e seu circuito de proteção. Segundo \citeonline{fonsecadesenvolvimento}, o objetivo deste componente é alimentar individualmente o circuito integrado ADE7758 pois, para seu correto funcionamento, o sinal \textit{Ground DC} da fonte AC/DC deve ser acoplado diretamente ao sinal "Neutro" da rede elétrica. 

\subsection{Interface de Comunicação}
\label{sec:spi}

A interface de comunicação utilizada para a troca de dados entre o microcontrolador e o circuito integrado ADE7758 foi a interface de comunicação serial SPI (\textit{Serial Peripheral Interface}), um protocolo de comunicação serial síncrona, desenvolvido pela \textit{Motorola}, que permite a troca de informações entre dispositivos. Sua maior utilização se dá em sistemas embarcados, estabelecendo a comunicação entre microcontroladores e outros periféricos, como conversores A/D, circuitos integrados, EEPROMs seriais, entre outros. \cite{leens2009introduction, microchip:pic32}.

O protocolo SPI usa uma topologia mestre-escravo, onde um dispositivo "mestre" envia e requisita dados de um ou mais dispositivos "escravos". A comunicação se dá em quatro linhas de sinal (\textit{four wire serial bus}):

\begin{itemize}
\item [-]Um sinal de clock (SCLK), enviando pelo dispositivo mestre para um ou mais dispositivos escravos, definindo a síncronização de toda a comunicação entre os dispositivos.
\item [-]Uma linha para troca de dados do mestre para o(s) escravo(s), MOSI (Master Out-Slave In).
\item [-]Uma linha para troca de dados do(s) escravo(s) para o mestre, MISO (Master In-Slave Out).
\item [-]Um sinal de seleção de escravo (SSn), único para cada dispositivo escravo, que é usado para selecionar com qual dispositivo escravo o mestre irá se comunicar.
\end{itemize}

A Figura \ref{fig:spi1} ilustra a configuração da interface de comunicação SPI, com suas quatro linhas de sinal, em um sistema com um mestre e um escravo, enquanto na Figura \ref{fig:spi2} é possível ver como se dá a expansão dessa configuração para múltiplos dispositivos escravos.

\begin{figure}[H]
\caption{Topologia da comunicação SPI - Um mestre e um escravo}
\centering
\includegraphics[width=10cm, height=8cm,keepaspectratio]{./Figuras/SPI_1.jpg}
\label{fig:spi1} \fonte{Autoria Própria}
\end{figure}

\begin{figure}[H]
\caption{Topologia da comunicação SPI - Um mestre para um ou mais escravos}
\centering
\includegraphics[width=10cm, height=8cm,keepaspectratio]{./Figuras/SPI_2.jpg}
\label{fig:spi2} \fonte{Autoria Própria}
\end{figure}

Como mencionado anteriormente, o microcontrolador PIC32MX795F512L possui quatro interfaces SPI, e a utilizada para este trabalho foi a SPI canal 1. O microcontrolador foi configurado como um dispositivo mestre, enquanto o circuito integrado atua como escravo. 

\citeonline{fonsecadesenvolvimento} explica que a interface de comunicação entre a placa de medição trifásica e a placa do microcontrolador foi eletricamente desacoplada através de acopladores ópticos. Isso foi feito para evitar danos nos componentes da placa do microcontrolador, cujo sinal \textit{Ground DC} é também proveniente da porta USB e da conexão Ethernet de um computador, utilizado para a programação do microcontrolador. 

\begin{figure}[H]
\caption{Esquemático da interface de comunicação e dos acopladores ópticos}
\centering
\includegraphics[width=14cm, height=14cm,keepaspectratio]{./Figuras/eletrico2.jpg}
\label{fig:eletrico2} \fonte{\cite{fonsecadesenvolvimento}}
\end{figure}

A Figura \ref{fig:eletrico2} ilustra o esquemático dos acopladores ópticos (U2 a U6) e a interface de comunicação SPI entre o circuito integrado ADE7758 (U1) e a placa do microcontrolador (J5). As características desses acopladores garantem sua utilização nos sinais da comunicação SPI (SCLK, MOSI, MISO e SS). Um quinto acoplador foi utilizado junto ao sinal gerado pelo pino IRQ do circuito integrado ADE7758, que será explicado na seção \ref{subsec:rms} \cite{fonsecadesenvolvimento}.

\begin{figure}[H]
\caption{Face inferior da placa de medição trifásica}
\centering
\includegraphics[width=12cm, height=12cm,keepaspectratio]{./Figuras/inferior.jpg}
\label{fig:inferior} \fonte{\cite{fonsecadesenvolvimento}}
\end{figure}

Na Figura \ref{fig:inferior} é possível observar a face inferior da placa de medição trifásica, assim como os acopladores ópticos mencionados anteriormente e o circuito integrado ADE7758. 

\section{Firmware}

O firmware do dispositivo foi desenvolvido de maneira que o protótipo realiza-se a detecção dos eventos de variações de tensão de curta duração, classificando-os e disponibilizando-os online para consulta pelo usuário. Para isso, o dispositivo realiza as seguintes atividades:

\begin{itemize}
\item [-] Configuração do relógio em tempo real do microcontrolador PIC32MX795F512L através de dados fornecidos pelo usuário;
\item [-] Coleta dos valores de tensão nas três fases da rede de baixa tensão através da placa de medição trifásica;
\item [-] Cálculo do valor RMS da tensão em cada fase através do circuito integrado ADE7758;
\item [-] Classificação, no caso de ocorrência, dos eventos de VTCD através dos Timers e demais funcionalidades do microcontrolador PIC32MX795F512L. As informações de data e hora da ocorrência de cada eventos são salvas, juntamente com o tipo do evento, na memória RAM do microcontrolador.
\item [-] Disponibilização das informações salvas pelo sistema em um buffer rotativo para consulta  pelo usuário através de uma rede Ethernet.
\end{itemize}  

A figura \ref{fig:fluxograma} ilustra um fluxograma com as atividades desempenhadas pelo Sistema de Monitoramento de Variações de Tensão de Curta Duração.

\begin{figure}[H]
\caption{Fluxograma apresentando a sequência de atividades feitas pelo sistema}
\centering
\includegraphics[width=12cm, height=12cm,keepaspectratio]{./Figuras/fluxograma.jpg}
\label{fig:fluxograma} \fonte{Autoria Própria}
\end{figure}

\subsection{Aquisição da tensão RMS da rede elétrica}
\label{subsec:rms}

O valor eficaz da tensão das três fases da rede fica armazenado em um dos registradores de 24 bits disponíveis no ADE7758: AVRMS (0x0D), BVRMS (0x0E) e CVRMS (0x0F). Uma interrupção com o TIMER2 foi então programada para ocorrer a cada 100 ms, tempo necessário para garantir a confiabilidade dos valores lidos nos registradores \cite{analogdevices:ade7758}.  Dentro dessa interrupção são calculados os valores eficazes das três fases da tensão.

De acordo com o Datasheet do ADE7758, para garantir a estabilidade da medida é recomendável realizar a leitura em sincronia com o início da onda da tensão. Para que isso seja possível, o circuito integrado conta com o pino IRQ (pino 18, como mostrado na Figura \ref{fig:ade7758}), que, através da configuração do registrador \textit{Mask}, vai para nível lógico baixo para indicar a ocorrência de uma determinada interrupção.

 A Figura \ref{fig:irq} ilustra esse comportamento de maneira simplificada. Quando o sinal da tensão cruza o eixo x (no início da onda), o valor do pino IRQ vai para nível lógico baixo, indicando a ocorrência desse evento. Para que o valor do pino retorne ao nível lógico alto, é necessária a leitura do registrador RSTATUS. 

\begin{figure}[H]
\caption{IRQ}
\centering
\includegraphics[width=10cm, height=8cm,keepaspectratio]{./Figuras/irq.JPG}
\label{fig:irq} \fonte{Adaptado de \citeonline{analogdevices:ade7758}}
\end{figure}

O último passo para a obtenção do valor RMS da tensão é o escalonamento do sinal. De acordo com \citeonline{analogdevices:ade7758}, o valor dos registradores de tensão em máxima escala é de 1639101 unidades (rede de 60 Hz), o que equivale a um valor de tensão RMS de aproximadamente 353.91 V. Desta maneira, temos que cada 4.631 unidades lidas no registrador equivalem a $1 \ mV_{RMS}$.

\begin{equation}
\label{eq:rms}
\frac{1639101 \ unidades}{353907 \ mV_{RMS}} = \frac{4.631 \ unidades}{1 \ mV}
\end{equation}

Devido ao elevado valor dos resistores presentes nos divisores resistivos, o valor encontrado na equação \ref{eq:rms} não é exato, sendo necessária uma análisa manual, com ajuda de um multímetro, para definir os valores corretos para o cálculo. Essa análise foi feita em \citeonline{fonsecadesenvolvimento}, e o resultado é apresentado a seguir:

\begin{table}[H]
    \centering
    \caption{Fatores de conversão para cálculo da tensão RMS}
    \label{tab:norm}
    \scalebox{0.8}{
\begin{tabular}{c|c|c}
\hline 
\multicolumn{3}{c}{Valor de conversão para 60 Hz (unidades/mV)} \\ 
\hline 
Fase A & Fase B & Fase C \\ 
\hline 
4,6278 & 4,7515 & 4,6527 \\ 
\hline 
\end{tabular}}

\fonte{Adaptado de \citeonline{fonsecadesenvolvimento}}
\end{table}

O cálculo da tensão RMS é feito da seguinte maneira:

\begin{itemize}
\item [-] O registrador RSTATUS é lido para garantir que o pino IRQ estará em nível lógico alto no início da operação.
\item [-] O registrador Mask é configurado para gerar uma interrupção no início da onda de tensão da fase selecionada (\textit{zero crossing}).
\item [-] O sistema aguarda a ocorrência da interrupção monitorando o pino IRQ, que é conectado ao pino RD12 do microcontrolador.
\item [-] Após a ocorrência da interrupção, o registrador RSTATUS é lido novamente para resetar o indicador de interrupção.
\item [-] É feita a leitura do registrador correspondente à fase de tensão desejada (AVRMS, BVRMS ou CVRMS), para obter o valor RMS da tensão.
\item [-] O valor lido é dividido pelo fator de conversão correspondente da tabela \ref{tab:norm} para se obter o valor em $V_{RMS}$
\item [-] O processo é reiniciado para a próxima fase de tensão.
\end{itemize}

A partir dos passos descritos acima, foram desenvolvidas três funções, uma para cada fase da tensão, que calculam os valores de tensão eficaz: getAVRMS, getBVRMS e getCVRMS. A Figura \ref{fig:getA} ilustra o funcionamento da função getAVRMS. 

\begin{figure}[H]
\caption{Fluxograma do firmware da função getAVRMS}
\centering
\includegraphics[width=10cm, height=10cm,keepaspectratio]{./Figuras/getAVRMS.jpeg}
\label{fig:getA} \fonte{Autoria própria}
\end{figure}

Assim, o funcionamento completo da rotina de tratamento da interrupção do TIMER2 é ilustrado na Figura \ref{fig:timer2}.

\begin{figure}[H]
\caption{Fluxograma da rotina de tratamento da interrupção do TIMER2}
\centering
\includegraphics[width=16cm, height=16cm,keepaspectratio]{./Figuras/TIMER2.jpeg}
\label{fig:timer2} \fonte{Autoria própria}
\end{figure}

\subsection{Classificação dos eventos de VTCD}

Após o cálculo da tensão eficaz das três fases da tensão, é feito o monitoramento do valor lido. Caso o valor esteja abaixo de 0.9 pu (interrupção ou afundamento) ou acima de 1.1 pu (elevação), o sistema ativará uma interrupção periódica no Timer 3, 4 ou 5, dependendo da fase em que ocorrer o evento. A periodicidade da interrupção gerada por cada um dos timers, assim como sua respectiva fase, são apresentados na tabela \ref{tab:calculo}. 

\begin{table}[H]
    \centering
    \caption{Timers utilizados para classificação das VTCD}
    \label{tab:calculo}
    \scalebox{0.8}{
\begin{tabular}{c|c|c|c}
\hline 
- & Fase A & Fase B & Fase C \\ 
\hline 
Timer & 3 & 4 & 5 \\ 
\hline 
Tempo & 16 ms & 10 ms & 15 ms \\ 
\hline 
\end{tabular}}

\fonte{Autoria Própria}
\end{table}

O período de interrupção dos Timers 3, 4 e 5 foi escolhido de maneira a permitir uma verificação do limite inferior de duração de afundamentos e elevações momentâneas, que é de um ciclo da rede. Nesse caso, para uma rede de 60 Hz, um ciclo leva aproximadamente 16.67 ms.

Na rotina de tratamento de cada uma das interrupção há um contador, que é incrementado sempre que uma interrupção é gerada. Assim, se ao final do evento o valor do contador for igual a 1, não é possível classificar essa ocorrência como um evento de VTCD. Cada interrupção possui uma periodicidade diferente para evitar possíveis atrasos no processamento.

Quando o valor da tensão retorna a faixa normal de operação, a interrupção do respectivo Timer é desabilitada e é feito o cálculo da duração total do evento, que é então classificado como  momentâneo ou temporário. Por último, essa informação é salva, juntamente com os valores dos registradores RTCDATE e RTCTIME, em um buffer rotativo (que será explicado com mais detalhes na seção \ref{subsec:buffer}), e o contador é zerado para o próximo evento. 

A Figura \ref{fig:timer3} ilustra o funcionamento da rotina de tratamento da interrupção do TIMER3.

\begin{figure}[H]
\caption{Fluxograma da rotina de tratamento da interrupção do TIMER3}
\centering
\includegraphics[width=12cm, height=12cm,keepaspectratio]{./Figuras/TIMER3.jpeg}
\label{fig:timer3} \fonte{Autoria própria}
\end{figure}

Como exemplo, caso a leitura da tensão RMS da Fase A da rede apresente um valor abaixo de 0.9 pu (114.4 V, para uma rede de $127 \ V_{RMS}$), o Timer3 será ativado, gerando uma interrupção a cada 16 ms. Se, após o retorno da tensão para o valor correto, o valor do contador for igual a 01, isso significará que o evento de afundamento teve a duração de 1 ciclo da rede e, de acordo com a tabela \ref{tab:VTCD}, será classificado como um evento de Afundamento Momentâneo de Tensão. Essa informação será salva no buffer, juntamente com a hora e a data da ocorrência (valores de RTCDATE e RTCTIME) e disponibilizada para o usuário através de uma rede Ethernet, que será explicada com mais detalhes no capítulo 4. 

\subsection{Buffer rotativo}
\label{subsec:buffer}

Para que fosse possível armazenar os dados dos eventos de variações de tensão de curta duração, foi desenvolvido um buffer rotativo, ou seja, um sistema que salva as informações necessárias na memória do microcontrolador e, quando o limite dessa memória é atingido, substitui as informações mais antigas por ocorrências novas.

Essas informações são salvas na memória RAM do microcontrolador, que possui capacidade de 128 kB. De acordo com os testes realizados, o sistema é capaz de salvar aproximadamente 5000 eventos por fase, cada um contendo data, hora e classificação de acordo com amplitude e duração. 

Os eventos salvos no buffer podem ser acessados sempre que necessário pelo usuário através de uma rede Ethernet, que será descrita com detalhes no capítulo 4.